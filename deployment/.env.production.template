# TMS Server Production Environment Configuration
# Copy this file to .env.production and fill in the actual values
# Location: /home/tmsapp/tms-server/.env.production

# ============================================
# Database Configuration
# ============================================
DATABASE_URL=postgresql+asyncpg://postgres:REDACTED_DB_PASSWORD@localhost:5432/tms_production_db
DATABASE_URL_SYNC=postgresql://postgres:REDACTED_DB_PASSWORD@localhost:5432/tms_production_db

# ============================================
# Redis Configuration
# ============================================
REDIS_URL=redis://:REDACTED_REDIS_PASSWORD@localhost:6379/0

# ============================================
# GCGC User Management System Integration
# ============================================
# IMPORTANT: Update these with your actual GCGC production values
USER_MANAGEMENT_API_URL=https://tms.example.com
USER_MANAGEMENT_API_KEY=your_gcgc_production_api_key_here
USER_MANAGEMENT_API_TIMEOUT=30
TMS_API_URL=https://tms.example.com
TMS_API_KEY=your_gcgc_production_api_key_here
GCGC_LOGIN_URL=https://tms.example.com/auth/signin

# ============================================
# JWT Configuration
# ============================================
# CRITICAL: This MUST match GCGC's NEXTAUTH_SECRET exactly!
JWT_SECRET=your_gcgc_nextauth_secret_here_minimum_32_characters

# ============================================
# Alibaba Cloud OSS Configuration
# ============================================
# Update with your actual OSS credentials
OSS_ACCESS_KEY_ID=your_oss_access_key_id_here
OSS_ACCESS_KEY_SECRET=your_oss_access_key_secret_here
OSS_BUCKET_NAME=tms-oss-goli
OSS_ENDPOINT=oss-ap-southeast-6.aliyuncs.com

# Use internal endpoint for better performance (lower latency, no bandwidth charges)
# Uncomment if your ECS instance is in the same region as OSS
# OSS_ENDPOINT=oss-ap-southeast-6-internal.aliyuncs.com

# ============================================
# Application Configuration
# ============================================
ENVIRONMENT=production
DEBUG=false
LOG_LEVEL=info

# ============================================
# CORS Configuration
# ============================================
# Add your production domain(s)
ALLOWED_ORIGINS=https://tms-chat.example.com,https://www.tms-chat.example.com

# ============================================
# Security Configuration
# ============================================
# Session configuration
SESSION_TIMEOUT=86400  # 24 hours in seconds
MAX_LOGIN_ATTEMPTS=5
LOGIN_TIMEOUT=900  # 15 minutes in seconds

# Rate limiting (requests per minute)
API_RATE_LIMIT=100
WS_RATE_LIMIT=50

# ============================================
# File Upload Configuration
# ============================================
MAX_FILE_SIZE=104857600  # 100MB in bytes
ALLOWED_FILE_TYPES=image/jpeg,image/png,image/gif,image/webp,video/mp4,video/webm,audio/mpeg,audio/ogg,application/pdf,application/msword,application/vnd.openxmlformats-officedocument.wordprocessingml.document,application/vnd.ms-excel,application/vnd.openxmlformats-officedocument.spreadsheetml.sheet

# ============================================
# WebSocket Configuration
# ============================================
WS_MAX_CONNECTIONS=10000
WS_HEARTBEAT_INTERVAL=30  # seconds
WS_CONNECTION_TIMEOUT=300  # seconds

# ============================================
# Database Connection Pool Configuration
# ============================================
DB_POOL_SIZE=20
DB_MAX_OVERFLOW=10
DB_POOL_RECYCLE=3600  # seconds
DB_POOL_PRE_PING=true

# ============================================
# Cache Configuration
# ============================================
CACHE_DEFAULT_TTL=600  # 10 minutes
CACHE_USER_TTL=600  # 10 minutes
CACHE_PRESENCE_TTL=300  # 5 minutes
CACHE_SESSION_TTL=86400  # 24 hours

# ============================================
# Email Configuration (Optional)
# ============================================
# SMTP_HOST=smtp.example.com
# SMTP_PORT=587
# SMTP_USER=noreply@tms-chat.example.com
# SMTP_PASSWORD=your_smtp_password
# SMTP_FROM=noreply@tms-chat.example.com
# SMTP_TLS=true

# ============================================
# Monitoring & Logging (Optional)
# ============================================
# SENTRY_DSN=https://your-sentry-dsn@sentry.io/project-id
# NEW_RELIC_LICENSE_KEY=your_new_relic_license_key
# DATADOG_API_KEY=your_datadog_api_key
